name: __PROJECTNAME__
services:
  dev-container:
    container_name: __PROJECTNAME__-dev-container
    image: ${HOST}/__PROJECTNAME__:latest
    env_file:
      - .env
    ports:    
      - "0:22"
    extra_hosts:
      - "host.docker.internal:host.gateway"
    volumes:
      - ./.home:/home
      - /Users/${USERNAME}/.ssh/${LOCALHOST_SSH_ID}.pub:/home/.host/${USERNAME}/ssh/local.pub
      - ${DOTFILES_ROOT}/.config/nvim/:/home/.host/${USERNAME}/nvim/.config/
      - ${DOTFILES_ROOT}/.zshrc_shared:/home/.host/${USERNAME}/zshrc/.zshrc_shared
      - ./.zshrc_local:/home/${USERNAME}/.zshrc_local
      - ./.nvim.lua:/home/${USERNAME}/.nvim.lua
      - ../:/home/${USERNAME}/project
      - empty:/home/${USERNAME}/project/container

volumes:
  empty:
    external: true
